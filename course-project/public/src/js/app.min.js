var deferredPrompt;const enableNotificationsButtons=document.querySelectorAll(".enable-notifications"),displayConfirmNotification=("serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js").then(()=>{console.log("Service worker registered.")}).catch(i=>console.log(i)),window.addEventListener("beforeinstallprompt",i=>(console.log("beforeinstallprompt fired"),i.preventDefault(),deferredPrompt=i,!1)),()=>{if("serviceWorker"in navigator){const e={body:"You successfully subscribed to our Notification service!",icon:"/src/images/icons/app-icon-96x96.png",image:"/src/images/sf-boa.jpg",dir:"ltr",lang:"en-US",vibrate:[100,50,200],badge:"/src/images/icons/app-icon-96x96.png",tag:"confirm-notification",renotify:!0,actions:[{action:"confirm",title:"OK",icon:"/src/images/icons/app-icon-96x96.png"},{action:"cancel",title:"Cancel",icon:"/src/images/icons/app-icon-96x96.png"}]};navigator.serviceWorker.ready.then(i=>{i.showNotification("Sucessfully subscribed",e)})}}),askForNotificationsPermission=()=>{Notification.requestPermission(i=>{console.log("User choice",i),"granted"!==i?console.log("No notification permission granted!"):configurePushSub()})};if("Notification"in window)for(let i=0;i<enableNotificationsButtons.length;i++)enableNotificationsButtons[i].style.display="inline-block",enableNotificationsButtons[i].addEventListener("click",askForNotificationsPermission);const configurePushSub=()=>{if("serviceWorker"in navigator){let e;navigator.serviceWorker.ready.then(i=>(e=i).pushManager.getSubscription()).then(i=>{if(null===i)return i=urlBase64ToUint8Array("BL610ZNW5qPH70nUHPEB4pGWXCXgrGdtq3CzndvQng1a75-HkURz26mnBu6nuZAOizJc6ONfZOU8yAtDnP0l8Ng"),e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:i});alert("Subscription we have")}).then(i=>fetch("https://teste-d4240-default-rtdb.firebaseio.com/subscriptions.json",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(i)})).then(i=>{console.log(i),i.ok&&displayConfirmNotification()}).catch(i=>console.log(i))}};